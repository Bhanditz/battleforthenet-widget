{"version":3,"sources":["iframe/js/countdown.js","iframe/js/progress-bar.js","iframe/js/script.js"],"names":["Countdown","params","this","target","DOMNode","document","querySelector","date","interval","requestAnimationFrame","bind","tick","start","ProgressBar","barCount","currentIndex","innerHTML","i","classList","remove","self","setTimeout","prototype","destroy","stop","pad","num","window","setInterval","clearInterval","now","Date","diff","Math","max","render","days","floor","hours","minutes","seconds","textContent","bars","querySelectorAll","length","add","getOrg","org","orgs","dp","code","name","url","donate","fp","fftf","hasOwnProperty","coinToss","random","getRandomOrg","getTheme","theme","themeObj","className","logos","headline","body","htmlContent","keys","Object","k","renderContent","classNames","split","img","fragment","createDocumentFragment","createElement","setAttribute","appendChild","indexOf","onload","getElementById","paragraph","bodyFragment","bodyCopy","learnMore","options","renderOrgRotation","orgInput","checkbox","orgLink","disclaimer","donateLinks","addCloseListeners","addEventListener","e","preventDefault","sendMessage","requestType","data","BFTN_IFRAME_MSG","parent","postMessage","initGoogleAnalytics","s","o","g","r","a","m","q","push","arguments","l","getElementsByTagName","async","src","parentNode","insertBefore","ga","transitionTimer","loading","main","callPrompt","callScript","animations","debug","init","onError","Raven","captureException","showCallScript","clearTimeout","setActionCookie","val","expires","actionCookieExpires","onSuccess","call","showAfterAction","onCall","uncloseable","disableGoogleAnalytics","navigator","doNotTrack","form","userPhone","phone","value","postcode","protest","href","join","zipcode","source","referrer","formData","FormData","xhr","XMLHttpRequest","checked","append","open","getAttribute","send","footer","log","console","apply","BFTN_WIDGET_MSG","modalAnimation"],"mappings":"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","file":"main.min.js","sourcesContent":["'use strict';\n\nfunction Countdown(params) {\n  this.target = params.target;\n\n  this.DOMNode = document.querySelector(this.target);\n\n  if (this.DOMNode) {\n    this.date = params.date;\n    this.interval = null;\n    this.requestAnimationFrame = this.requestAnimationFrame.bind(this);\n    this.tick = this.tick.bind(this);\n\n    this.start();\n  }\n}\n\nCountdown.prototype.destroy = function() {\n  this.stop();\n\n  delete this.date;\n  delete this.tick;\n};\n\nCountdown.prototype.pad = function(num) {\n  return num > 9 ? num : '0' + num;\n};\n\nCountdown.prototype.requestAnimationFrame = function() {\n  var request = window.requestAnimationFrame || setTimeout;\n  request(this.tick);\n};\n\nCountdown.prototype.start = function() {\n  this.stop();\n  this.requestAnimationFrame();\n  this.interval = setInterval(this.requestAnimationFrame, 1000);\n};\n\nCountdown.prototype.stop = function() {\n  clearInterval(this.interval);\n};\n\nCountdown.prototype.tick = function() {\n  var now = Date.now();\n  var diff = Math.max(0, this.date - now);\n\n  this.render(diff);\n\n  if (diff === 0) {\n    this.destroy();\n    return;\n  }\n};\n\nCountdown.prototype.render = function(diff) {\n  var DAY = (1000 * 60 * 60 * 24);\n  var HOUR = (1000 * 60 * 60);\n  var MINUTE = (1000 * 60);\n  var SECOND = (1000);\n\n  var days = Math.floor(diff / DAY);\n  diff -= days * DAY;\n\n  var hours = Math.floor(diff / HOUR);\n  diff -= hours * HOUR;\n\n  var minutes = Math.floor(diff / MINUTE);\n  diff -= minutes * MINUTE;\n\n  var seconds = Math.floor(diff / SECOND);\n  diff -= seconds * SECOND;\n\n  this.DOMNode.querySelector('.days').textContent = this.pad(days);\n  this.DOMNode.querySelector('.hours').textContent = this.pad(hours);\n  this.DOMNode.querySelector('.minutes').textContent = this.pad(minutes);\n  this.DOMNode.querySelector('.seconds').textContent = this.pad(seconds);\n};\n","'use strict';\n\nfunction ProgressBar(params) {\n  this.target = params.target;\n\n  this.DOMNode = document.querySelector(this.target);\n  this.barCount = 51;\n\n  if (this.DOMNode) {\n    this.interval = null;\n    this.requestAnimationFrame = this.requestAnimationFrame.bind(this);\n    this.tick = this.tick.bind(this);\n    this.currentIndex = 0;\n\n    var innerHTML = '<div class=\"progress-bar\">';\n\n    for (var i = 0; i < this.barCount; i++) {\n      innerHTML += '<div class=\"bar\"></div>';\n    }\n\n    innerHTML += '</div>';\n\n    this.DOMNode.innerHTML = innerHTML;\n    this.DOMNode.classList.remove('hidden');\n\n    var self = this;\n    setTimeout(function(){ \n      self.start();\n    }, 1000);\n  }\n}\n\nProgressBar.prototype.destroy = function() {\n  this.stop();\n\n  delete this.tick;\n};\n\nProgressBar.prototype.requestAnimationFrame = function() {\n  var request = window.requestAnimationFrame || setTimeout;\n  request(this.tick);\n};\n\nProgressBar.prototype.start = function() {\n  this.stop();\n  this.requestAnimationFrame();\n  this.interval = setInterval(this.requestAnimationFrame, 25);\n};\n\nProgressBar.prototype.stop = function() {\n  clearInterval(this.interval);\n};\n\nProgressBar.prototype.tick = function() {\n  if (this.currentIndex < this.barCount) {\n    this.currentIndex++;\n\n    var bars = this.DOMNode.querySelectorAll('.progress-bar .bar:nth-child(-n+' + this.currentIndex + ')');\n    \n    for (var i = 0; i < bars.length; i++) {\n      var bar = bars[i];\n      bar.classList.add('active');\n    }\n  }\n  else {\n    this.DOMNode.querySelector('.progress-bar').classList.add('done');\n    this.stop();\n  }\n};\n","'use strict';\n\n(function() {\n  var transitionTimer;\n\n  var loading = document.getElementById('loading');\n  var main = document.getElementById('main');\n  var callPrompt = document.getElementById('prompt');\n  var callScript = document.getElementById('script');\n\n  function getOrg(org) {\n    function getRandomOrg() {\n      var coinToss = Math.random();\n\n      if (coinToss < .20) {\n        return 'fp';\n      } else if (coinToss < .60) {\n        return 'dp';\n      } else {\n        return 'fftf';\n      }\n    }\n\n    var orgs = {\n      'dp': {\n        code: 'dp',\n        name: 'Demand Progress',\n        url: 'https://demandprogress.org/',\n        donate: 'https://secure.actblue.com/donate/nndayofaction?refcode=20170712-bftn'\n      },\n      'fp': {\n        code: 'fp',\n        name: 'Free Press Action Fund',\n        url: 'https://www.freepress.net/',\n        donate: 'https://freepress.actionkit.com/donate/single/'\n      },\n      'fftf': {\n        code: 'fftf',\n        name: 'Fight for the Future',\n        url: 'https://www.fightforthefuture.org/',\n        donate: 'https://donate.fightforthefuture.org/campaigns/bftnprotests/'\n      }\n    };\n\n    return orgs.hasOwnProperty(org) ? orgs[org] : orgs[getRandomOrg()];\n  }\n\n  function getTheme(theme) {\n    var themeObj;\n\n    switch(typeof theme === 'string' ? theme : '') {\n      case 'money':\n        themeObj = {\n          className: theme,\n          logos: ['images/money.png'],\n          headline: 'Please upgrade your plan to proceed.',\n          body: 'Well, not yet. But the FCC just voted to gut net neutrality rules, letting Internet providers like Verizon and Comcast control what we can see and do online with new fees, throttling, and censorship. But we can still get Congress to stop this by using the Congressional Review Act (CRA) to overturn the FCC vote.\\n\\nWe need one more vote to win in the Senate. Write and call now!'\n        };\n        break;\n      case 'stop':\n        themeObj = {\n          className: theme,\n          logos: ['images/stop.png'],\n          headline: 'This site has been blocked by your ISP.',\n          body: 'Well, not yet. But the FCC just voted to gut net neutrality rules, letting Internet providers like Verizon and Comcast control what we can see and do online with new fees, throttling, and censorship. But we can still get Congress to stop this by using the Congressional Review Act (CRA) to overturn the FCC vote.\\n\\nWe need one more vote to win in the Senate. Write and call now!'\n        };\n        break;\n      case 'slow':\n        themeObj = {\n          className: theme,\n          logos: ['images/slow.svg'],\n          headline: 'Sorry, we\\'re stuck in the slow lane.',\n          body: 'Well, not yet. But the FCC just voted to gut net neutrality rules, letting Internet providers like Verizon and Comcast control what we can see and do online with new fees, throttling, and censorship. But we can still get Congress to stop this by using the Congressional Review Act (CRA) to overturn the FCC vote.\\n\\nWe need one more vote to win in the Senate. Write and call now!'\n        };\n        break;\n      case 'without':\n        themeObj = {\n          className: theme,\n          logos: ['images/slow.svg', 'images/stop_gradient.png', 'images/money_gradient.png'],\n          headline: 'This is the web without net neutrality.',\n          body: 'The FCC just voted to gut net neutrality rules, letting Internet providers like Verizon and Comcast control what we can see and do online with new fees, throttling, and censorship. But we can still get Congress to stop this by using the Congressional Review Act (CRA) to overturn the FCC vote.\\n\\nWe need one more vote to win in the Senate. Write and call now!'\n        };\n        break;\n      case 'glitch':\n        themeObj = {\n          className: theme,\n          logos: ['images/glitch.png'],\n          body: 'The FCC just voted to gut net neutrality rules, letting Internet providers like Verizon and Comcast control what we can see and do online with new fees, throttling, and censorship. But we can still get Congress to stop this by using the Congressional Review Act (CRA) to overturn the FCC vote.\\n\\nWe need one more vote to win in the Senate. Write and call now!'\n        };\n        break;\n      case 'countdown':\n        themeObj = {\n          className: 'countdown',\n          logos: [],\n          headline: 'URGENT!',\n          body: 'The FCC just voted to gut net neutrality rules, letting Internet providers like Verizon and Comcast control what we can see and do online with new fees, throttling, and censorship. But we can still get Congress to stop this by using the Congressional Review Act (CRA) to overturn the FCC vote.\\n\\nWe need one more vote to win in the Senate. Write and call now!'\n        };\n        break;\n      case 'onemorevote':\n        themeObj = {\n          className: 'onemorevote onemorevote-text',\n          logos: ['images/one-more-vote-text.png'],\n          htmlContent: 'The FCC voted to repeal net neutrality, letting internet providers like Verizon and Comcast impose new fees, throttle bandwidth, and censor online content.  But we can stop them by using the Congressional Review Act (CRA).<br><strong>We need one more vote to win the Senate.  Fill out the form below to join the mission, or <a href=\"https://www.battleforthenet.com/#widget-learn-more\">learn more here</a>.</strong>'\n        };\n        break;\n      case 'capitol':\n      default:\n        themeObj = {\n          className: 'onemorevote onemorevote-capitol',\n          logos: ['images/one-more-vote-bg.png'],\n          htmlContent: 'The FCC voted to repeal net neutrality, letting internet providers like Verizon and Comcast impose new fees, throttle bandwidth, and censor online content.  But we can stop them by using the Congressional Review Act (CRA).<br><strong>We need one more vote to win the Senate.  Fill out the form below to join the mission, or <a href=\"https://www.battleforthenet.com/#widget-learn-more\">learn more here</a>.</strong>'\n        };\n        break;\n    }\n\n    if (typeof theme == 'object') {\n      var keys = Object.keys(theme);\n      for (var k = 0; k < keys.length; k++) {\n        themeObj[keys[k]] = theme[keys[k]];\n      }\n    }\n\n    return themeObj;\n  }\n\n  function renderContent(theme) {\n    var classNames = theme.className.split(' ');\n    for (var i = 0; i < classNames.length; i++) {\n      document.body.classList.add(classNames[i]);\n    }\n\n    // Render logos\n    var fragment = document.createDocumentFragment();\n    var img;\n\n    for (var i = 0; i < theme.logos.length; i++) {\n      img = document.createElement('img');\n      img.setAttribute('src', theme.logos[i]);\n      fragment.appendChild(img);\n    }\n\n    // if this is the capitol theme, start the progress bar after the logo loads\n    if (theme.className.indexOf('onemorevote-capitol') !== -1 && typeof ProgressBar === 'function') {\n      img.onload = function(){\n        new ProgressBar({\n          target: '#progress-bar'\n        });\n      };\n    }\n\n    document.getElementById('logos').appendChild(fragment);\n\n    // Render headline and body copy\n    if (theme.headline) {\n      document.getElementById('headline').textContent = theme.headline;\n    }\n\n    if (theme.htmlContent) {\n      document.getElementById('content').innerHTML = theme.htmlContent;\n    }\n    else {\n      var bodyFragment = document.createDocumentFragment();\n      var bodyCopy = theme.body.split('\\n');\n      var paragraph;\n\n      for (var i = 0; i < bodyCopy.length; i++) {\n        paragraph = document.createElement('p');\n        paragraph.textContent = bodyCopy[i];\n        bodyFragment.appendChild(paragraph);\n      }\n      \n      var learnMore = document.createElement('a');\n      learnMore.setAttribute('href', 'https://www.battleforthenet.com/#widget-learn-more');\n      learnMore.setAttribute('target', '_blank');\n      learnMore.textContent = 'Learn more.';\n\n      // Append link to last paragraph in body copy.\n      paragraph.textContent += ' ';\n      paragraph.appendChild(learnMore);\n\n      document.getElementById('content').appendChild(bodyFragment);\n    }\n\n    if (theme.className === 'countdown' && typeof Countdown === 'function') {\n      new Countdown({\n        target: '#countdown',\n        date: this.options.date\n      });\n    }\n  }\n\n  function renderOrgRotation(org) {\n    var fragment = document.createDocumentFragment();\n\n    var orgInput = document.createElement('input');\n    orgInput.setAttribute('type', 'hidden');\n    orgInput.setAttribute('name', 'org');\n    orgInput.setAttribute('value', org.code);\n    fragment.appendChild(orgInput);\n\n    var checkbox = document.createElement('input');\n    checkbox.setAttribute('type', 'checkbox');\n    checkbox.setAttribute('id', '_opt_in');\n    checkbox.setAttribute('checked', 'checked');\n    fragment.appendChild(checkbox);\n\n    var orgLink = document.createElement('a');\n    orgLink.setAttribute('href', org.url);\n    orgLink.setAttribute('target', '_blank');\n    orgLink.textContent = org.name;\n    fragment.appendChild(orgLink);\n\n    var disclaimer = document.createElement('span');\n    disclaimer.textContent = ' will contact you about future campaigns. FCC comments are public records.';\n    fragment.appendChild(disclaimer);\n\n    document.getElementById('rotation').appendChild(fragment);\n\n    var donateLinks = document.querySelectorAll('a.donate');\n    if (donateLinks.length) {\n      for (var i = 0; i < donateLinks.length; i++) {\n        if (org.donate) donateLinks[i].setAttribute('href', org.donate);\n      }\n    }\n  }\n\n  function addCloseListeners() {\n    // Add close button listener.\n    document.getElementById('close').addEventListener('mousedown', function(e) {\n      e.preventDefault();\n      sendMessage('stop');\n    });\n\n    document.getElementById('background').addEventListener('mousedown', function(e) {\n      // Ignore events that propagate up\n      if (e.target == document.getElementById('background')) sendMessage('stop');\n    });\n  }\n\n  function sendMessage(requestType, data) {\n    data || (data = {});\n    data.requestType = requestType;\n    data.BFTN_IFRAME_MSG = true;\n    parent.postMessage(data, '*');\n  }\n\n  function initGoogleAnalytics() {\n    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){\n    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\n    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\n    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');\n\n    if (typeof ga !== 'undefined') {\n      ga('create', 'UA-26576645-40', 'auto');\n      ga('send', 'pageview');\n    }\n  }\n\n  var animations = {\n    main: {\n      options: {\n        debug: false,\n      },\n      init: function(options) {\n        var keys = Object.keys(options);\n        for (var k = 0; k < keys.length; k++) {\n          this.options[keys[k]] = options[keys[k]];\n        }\n\n        renderContent.call(this, getTheme(this.options.theme));\n        renderOrgRotation(getOrg(this.options.org));\n\n        var org = getOrg(this.options.org);\n\n        if (this.options.uncloseable) {\n          document.getElementById('close').classList.add('hidden');\n        } else {\n          addCloseListeners();\n        }\n\n        if (!(this.options.disableGoogleAnalytics || navigator.doNotTrack)) initGoogleAnalytics();\n\n        function onError(e) {\n          if (Raven) Raven.captureException(e);\n        }\n\n        function showCallScript(e) {\n          if (transitionTimer) clearTimeout(transitionTimer);\n\n          if (callScript) callScript.classList.remove('invisible');\n          if (main) main.classList.add('invisible');\n          if (loading) loading.classList.add('hidden');\n        }\n\n        function setActionCookie() {\n          sendMessage('cookie', {\n            name: '_BFTN_WIDGET_ACTION',\n            val: 'true',\n            expires: this.options.actionCookieExpires\n          });\n        }\n\n        // Handle form submission\n        var form = document.getElementById('form');\n        form.addEventListener('submit', function submitForm(e) {\n          e.preventDefault();\n\n          // Prefill after-action call form\n          var userPhone = document.getElementById('userPhone');\n          var phone = document.getElementById('phone');\n          if (userPhone && phone && phone.value) userPhone.value = phone.value;\n\n          var postcode = document.getElementById('postcode');\n\n          var protest = document.getElementById('protest');\n          if (protest && postcode.value) {\n            protest.setAttribute('href', [protest.href, '?zipcode=', postcode.value].join(''));\n          }\n\n          var zipcode = document.getElementById('zipcode');\n          if (postcode && postcode.value && zipcode) zipcode.value = postcode.value;\n\n          // var footer = document.getElementById('footer');\n          // if (footer) {\n          //   footer.classList.remove('hidden');\n          //   footer.classList.remove('invisible');\n          // }\n\n          if (callPrompt) callPrompt.classList.remove('hidden');\n          if (main) main.classList.add('hidden');\n\n          // TODO: Add config option to skip real submit?\n          // loading.addEventListener('transitionend', onSuccess.bind(this));\n          // transitionTimer = setTimeout(onSuccess.bind(this), 500);\n\n          var source = document.getElementById('source');\n          if (source) source.value = document.referrer;\n\n          var formData = new FormData(form);\n          var xhr = new XMLHttpRequest();\n\n          // handle opt-out\n          var opt_in = document.getElementById('_opt_in');\n          if (!opt_in.checked) formData.append('opt_out', 1); \n\n          // TODO: Error handling\n          xhr.addEventListener('error', onSuccess.bind(this));\n          xhr.addEventListener('load', onSuccess.bind(this));\n\n          xhr.open(form.getAttribute('method'), form.getAttribute('action'), true);\n          xhr.send(formData);\n\n          if (loading) {\n            loading.classList.remove('hidden');\n            loading.classList.remove('invisible');\n          }\n        }.bind(this));\n\n        function onSuccess(e) {\n            if (transitionTimer) clearTimeout(transitionTimer);\n\n            // TODO: Error handling\n            // if (e && e.code >= 400) return onError(e);\n            setActionCookie.call(this);\n\n            if (loading) {\n              loading.addEventListener('transitionend', showAfterAction);\n              loading.classList.add('invisible');\n            }\n\n            transitionTimer = setTimeout(showAfterAction, 500);\n        }\n\n        function showAfterAction(e) {\n            if (transitionTimer) clearTimeout(transitionTimer);\n\n            if (callPrompt) callPrompt.classList.remove('invisible');\n\n            if (main) {\n              main.classList.add('invisible');\n              main.classList.add('hidden');\n            }\n\n            if (loading) loading.classList.add('hidden');\n        }\n\n        function onCall(e) {\n          if (transitionTimer) clearTimeout(transitionTimer);\n\n          // TODO: Display error instead of capturing silently?\n          if (e && e.code >= 300) onError(e);\n\n          setActionCookie.call(this);\n\n          if (loading) {\n            loading.addEventListener('transitionend', showCallScript);\n            loading.classList.add('invisible');\n          }\n\n          transitionTimer = setTimeout(showCallScript, 500);\n        }\n\n        var call = document.getElementById('call');\n        call.addEventListener('submit', function submitCall(e) {\n          e.preventDefault();\n\n          var footer = document.getElementById('footer');\n          if (footer) {\n            footer.classList.remove('hidden');\n            footer.classList.remove('invisible');\n          }\n\n          if (callScript) callScript.classList.remove('hidden');\n          if (callPrompt) callPrompt.classList.add('hidden');\n\n          var formData = new FormData(call);\n          var xhr = new XMLHttpRequest();\n\n          if (loading) {\n            loading.addEventListener('transitionend', onCall.bind(this));\n            loading.classList.remove('hidden');\n            loading.classList.remove('invisible');\n          }\n\n          transitionTimer = setTimeout(onCall.bind(this), 500);\n\n          xhr.open(call.getAttribute('method'), call.getAttribute('action') + '?ref=' + document.referrer, true);\n          xhr.send(formData);\n        }.bind(this));\n\n        return this;\n      },\n      log: function() {\n        if (this.options.debug) console.log.apply(console, arguments);\n      }\n    }\n  }\n\n  // Handle iframe messages\n  window.addEventListener('message', function(e) {\n    if (!e.data || !e.data.BFTN_WIDGET_MSG) return;\n\n    delete e.data.BFTN_WIDGET_MSG;\n\n    switch (e.data.requestType) {\n      case 'putAnimation':\n        animations[e.data.modalAnimation].init(e.data);\n        break;\n    }\n  });\n\n  // Start animation\n  sendMessage('getAnimation');\n})();\n"]}